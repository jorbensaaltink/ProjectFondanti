@{
    // Connectie Database
    var db = Database.Open("Fondanti");

    // Zodat boven nog tabel ziet met huidige wensen

    List<string> Thema = new List<string>();
    List<string> Vulling = new List<string>();
    List<string> Cake = new List<string>();
    List<string> Bekleding = new List<string>();
    List<string> Decoratie = new List<string>();
    
    List<string> Type = new List<string>(){"Thema", "Vulling", "Cake", "Bekleding", "Decoratie" };

    int count =0;

    foreach(var x in Type){
        
        var selectProduct = "SELECT Product FROM VOORRAAD  WHERE Type = @0";
        var rows = db.Query(selectProduct, x);

        var selectPrijs = "SELECT Prijs FROM VOORRAAD  WHERE Type = @0";
        var rowsprijs = db.Query(selectPrijs, x);
        
     // Toevoegen aan list voor het type

        if (x == "Thema"){
            foreach(var row in rows){
                Thema.Add(row.Product);
            }
        }
    
        // Voor vulling
        if (x == "Vulling"){
            foreach(var row in rows){
                Vulling.Add(row.Product);
                 
            }
            foreach(var rowprijs in rowsprijs){
                Vulling[count] += " ";Vulling[count] += rowprijs.Prijs;
                count++;
            }
            count=0;
        }
        // Voor Cake
        if (x == "Cake"){
            foreach(var row in rows){
                Cake.Add(row.Product);
                 
            }
            foreach(var rowprijs in rowsprijs){
                Cake[count] += " ";Cake[count] += rowprijs.Prijs;
                count++;
            }
            count=0;
        }
        // Voor Bekleding
        if (x == "Bekleding"){
            foreach(var row in rows){
                Bekleding.Add(row.Product);
                 
            }
            foreach(var rowprijs in rowsprijs){
                Bekleding[count] += " ";Bekleding[count] += rowprijs.Prijs;
                count++;
            }
            count=0;
        }
        // Voor Decoratie
        if (x == "Decoratie"){
            foreach(var row in rows){
                Decoratie.Add(row.Product);
                 
            }
            foreach(var rowprijs in rowsprijs){
                Decoratie[count] += " ";Decoratie[count] += rowprijs.Prijs;
                count++;
            }
            count=0;
        }
    }
    WebImage photo = null;
    var newFileName = "";
    var imagePath = "";
    if(IsPost){
        photo = WebImage.GetImageFromRequest();
        if(photo != null){
            newFileName = Guid.NewGuid().ToString() + "_" +
               Path.GetFileName(photo.FileName);
            imagePath = @"images\" + newFileName;

            photo.Save(@"~\" + imagePath);
        }
        var imageput = "INSERT INTO Image (Image) VALUES (@0)";
        db.Execute(imageput, newFileName);
    }

}

<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link href="FondantiStyle.css" rel="stylesheet" type="text/css">
        <title></title>
    </head>
    <body>
            <div id="top-header">
            <div class="content-center"><img src="img/fondanti-logo.png" alt="Fondanti logo"/>
            <div id="header-phone-number">
                <p>
                    <a href="http://www.fondanti.nl/">Home</a>
                    <a href="http://www.facebook.com/fondanti">
                        <img style="height: 50px; width: 50px;" src="img/facebook_logo.png" alt="Fondanti on Facebook"/></a>
                    <a href="tel:+31616064485">
                        <img style="height: 50px; width: 50px;" src="img/white_phone.png" alt="white phone"/>
                        <span>0616064485</span></a>
                </p>
            </div>
            </div>
    </div>
    <form method="post">

            <input id="resetButton" type="reset" value="Reset" onclick="removeAlleLagen()">
            <h2>Stap 1: De samenstelling</h2>
            
                <label>Inspiratieafbeelding uploaden:</label>
                    <label for="Image">Image</label>
                    <input type="file" name="Image" />
                    <br/>
                    <input type="submit" value="Upload" />
                @if(imagePath != ""){
                    <div class="result">
                    <img src="@imagePath" alt="image" />
                    </div>
                    }

            <p>
                <label>Thema:</label>
                    <select name ="test" form="test">
                        <option value=""></option>
                        @foreach(var x in Thema){
                            <option value="@x">@x</option>
                        }

                    </select> 
                <input type="text"> </p>

            <p>
                <label>Aantal personen:</label>
                <input id="aantalPersonenInput" type="number" onchange="buttonCheck()">
            </p>
            <div id="laag1">
                <p>
                    <label>Laag 1:</label> 
                    <button id="addButton" type="button" onclick="addLaag()">+</button>
                    <button id="removeButton" type="button" onclick="removeLaag()">-</button>
                    <a id="laagToevoegenText">Uw kunt 1 laag extra toevoegen per 15 personen.</a>
                </p>

                <p>
                    <label>Type cake laag 1:</label>
                    <select name ="test" form="test">
                        <option value=""></option>
                        @foreach(var x in Cake){
                            <option value="@x">@x</option>
                        }
                    </select> 
                </p>

                <p>
                    <label>Type bekleding laag 1:</label>
                    <select name ="test" form="test">
                        <option value=""></option>
                        @foreach(var x in Bekleding){
                            <option value="@x">@x</option>
                        }
                    </select>
                </p>
            
                <p>
                    <label>Type vulling laag 1:</label>
                    <select name ="test" form="test">
                        <option value=""></option>
                        @foreach(var x in Vulling){
                            <option value="@x">@x</option>
                        }
                    </select> 
                </p>
            </div>

            <p><label>Type Niveau decoratie:</label>
               <select name ="test" form="test">
               <option value=""></option>
               @foreach(var x in Decoratie){
                    <option value="@x">@x</option>
               }
               </select>  </p>

            <p><label>Allergieen:</label>
               <select name ="test" form="test">
               <option value=""></option>
               <option value="Glutenvrij">Glutenvrij</option>
               <option value="Geen">Geen</option>
               <option value="Anders namelijk...">Anders namelijk...</option>
               </select> <input type="text"> </p>

            <p><label>Gewenste opleverdatum:</label>
               <input type="date">
            </p>

            <strong><label>Opmerkingen:</label></strong>
            <p>
            <input type="text" style="width: 800px;">
            </p>

            <h2>Stap 2: Uw gegevens</h2>
           
            <p><label>Aanhef:</label>
               <select name ="test" form="test">
               <option value=""></option>
               <option value="Dhr.">Dhr.</option>
               <option value="Mw">Mw.</option>
               </select> </p>

            <p><label>Naam:</label>
               <input type="text"> </p>

            <p><label>Tel:</label>
               <input type="tel"> </p>

            <p><label>E-mailadres:</label>
               <input type="email" style="width: 200px;"> </p>

            <strong><label>Voorbeeld:</label></strong>
            <p style="border: 1px solid black; height: 200px; width: 200px">
            <input type="image">
            </p>

            <p> <input type="submit"value="Bevestig informatieverzoek"></p>
        </form>      
    </body>
</html>

<script>


    // lagen maken
    var cake = ["", "Biscuitdeeg (1 euro pp)", "Chocolate (2 euro pp)", "Red velvet (3 euro pp)"];
    var bekleding = ["", "Fondant (1 euro pp", "Marsepein (3 euro pp)", "Beide (4 euro pp)"];
    var vulling = ["", "Kindervulling (Vruchten met compote room) (1 euro pp)", "Gele room met oreo vulling (2 euro pp)", "Champagneroom met verse frambozen (3 euro pp)"];

    var currentLaag = 1;
    var aantalPersonen = 0;

    var laagDiv = document.getElementById("laag1");


    function buttonCheck() {
        if (currentLaag <= 1) {
            document.getElementById("removeButton").disabled = true;
        } else {
            document.getElementById("removeButton").disabled = false;
        }

        // zet aantal personen op 0

        aantalPersonen = document.getElementById("aantalPersonenInput").value;
        document.getElementById("aantalPersonenInput").value = aantalPersonen;

        // zodat aantal personen niet in de min kan
        if (aantalPersonen < 0) {
            aantalPersonen = 0;
        }

        // 15 personen per laag
        if (aantalPersonen >= currentLaag * 15) {
            document.getElementById("addButton").disabled = false;
        } else {
            document.getElementById("addButton").disabled = true;
        }

        while (((currentLaag - 1) * 15) > aantalPersonen) {
            removeLaag();
        }
    }

    //buttoncheck roepen zodat de buttons goed staan
    buttonCheck();

    // remove alle lagen
    function removeAlleLagen() {
        //loop door alle lagen heen en verwijdert ze
        while (currentLaag > 1) {
            var className = "elementsLaag" + currentLaag;
            var elements = document.getElementsByClassName(className);
            while (elements.length > 0) {
                elements[0].parentNode.removeChild(elements[0]);
            }
            currentLaag -= 1;
        }

        //doe een buttoncheck 
        buttonCheck();
    }

    // remove 1 laag
    function removeLaag() {
        //verwijdert de laatste laag
        var className = "elementsLaag" + currentLaag;
        var elements = document.getElementsByClassName(className);
        while (elements.length > 0) {
            elements[0].parentNode.removeChild(elements[0]);
        }

        if (currentLaag > 1) {
            currentLaag = currentLaag - 1;
        }

        //doe een buttoncheck
        buttonCheck();
    }

    //voegt een laag toe
    function addLaag() {
        currentLaag = currentLaag + 1;

        //label
        var para = document.createElement("p");
        laagDiv.appendChild(para);
        para.className = "elementsLaag" + currentLaag;

        var label = document.createElement("label");
        label.textContent = "Laag " + currentLaag + ":";
        label.className = "elementsLaag" + currentLaag;
        para.appendChild(label);


        // laag 1
        var para = document.createElement("p");
        para.className = "elementsLaag" + currentLaag;
        laagDiv.appendChild(para);

        var label = document.createElement("label");
        label.textContent = "Type cake laag " + currentLaag + ":";
        label.className = "elementsLaag" + currentLaag;
        para.appendChild(label);

        var selectList = document.createElement("select");
        selectList.className = "elementsLaag" + currentLaag;
        para.appendChild(selectList);

        for (var i = 0; i < cake.length; i++) {
            var option = document.createElement("option");
            option.value = cake[i];
            option.text = cake[i];
            selectList.appendChild(option);
        }

        //laag 2
        var para = document.createElement("p");
        para.className = "elementsLaag" + currentLaag;
        laagDiv.appendChild(para);

        var label = document.createElement("label");
        label.textContent = "Type bekleding laag " + currentLaag + ":";
        label.className = "elementsLaag" + currentLaag;
        para.appendChild(label);

        var selectList = document.createElement("select");
        selectList.className = "elementsLaag" + currentLaag;
        para.appendChild(selectList);

        for (var i = 0; i < bekleding.length; i++) {
            var option = document.createElement("option");
            option.value = bekleding[i];
            option.text = bekleding[i];
            selectList.appendChild(option);
        }

        //laag 3
        var para = document.createElement("p");
        para.className = "elementsLaag" + currentLaag;
        laagDiv.appendChild(para);

        var label = document.createElement("label");
        label.textContent = "Type vulling laag " + currentLaag + ":";
        label.className = "elementsLaag" + currentLaag;
        para.appendChild(label);

        var selectList = document.createElement("select");
        selectList.className = "elementsLaag" + currentLaag;
        para.appendChild(selectList);

        for (var i = 0; i < vulling.length; i++) {
            var option = document.createElement("option");
            option.value = vulling[i];
            option.text = vulling[i];
            selectList.appendChild(option);
        }

        //doe een buttoncheck
        buttonCheck();
    }
</script>
